var Prefix=function(){var n="",r=function(r){return n+"-"+r};return{init:function(r){n=r},_:r,get:r,id:function(n){return"#"+r(n)},cc:function(n){return"."+r(n)},data:function(r){return n+"_"+r.replace(/-/g,"_")}}}();
Prefix.init("scxt");
var AMZHelpers={isProductPage:function(){return!!document.querySelector("#heroImage, #title_feature_div, #booksTitle, #superleafProductAlert_feature_div, #mediaProductTitle_feature_div, #dp.book")},isOffersPage:function(){return document.location.pathname.match(/\/gp\/offer-listing/)},getASIN:function(){var e=document.location.href,t=RegExp("/([A-Z0-9]{10})(\\W|$)"),r=e.match(t);if(r){var a=r[1];return a.match(/^\d+$/)?a:a.match(/^\d+X$/)?a:a.match(/^B/i)?a:""}return""},getASINFromPage:function(){var e=document.querySelector("#ASIN");return e||(e=document.querySelector("[name=ASIN]")),e||(e=document.querySelector('[name="ASIN.0"')),e&&e.value?e.value:(e||(e=document.querySelector("#averageCustomerReviews[data-asin]")),e||(e=document.querySelector("[data-asin]")),e?e.dataset.asin:void 0)}};
(function(){var e=function(){var e,t=document.createElement("div");t.id=Prefix.get("stock-btn"),t.innerHTML="Count Stock!<small>OS Addon</small>";var n=document.querySelector("#dealsAccordionRow #dealOrderQuantity");if(e||(e=document.querySelector("#snsAccordionRowMiddle #availability_feature_div, #b2brdAccordionRow #availability")),n||(n=document.querySelector("#availabilityInsideBuyBox_feature_div")),n||(n=document.querySelector("#actionPanel #availability_feature_div")),n||(n=document.querySelector("#snsBuyBoxAccordion")),n||(n=document.querySelector("#buybox #buyBoxInner")),n||(n=document.querySelector("#unqualifiedBuyBox #buybox-see-all-buying-choices")),n||(n=document.querySelector("#bbop-content-container")),n||(n=document.querySelector("#exports_desktop_qualifiedBuybox_delivery_promise_feature_div")),AMZHelpers.isOffersPage()&&(n=document.querySelector("#olpRefinements > div"),t.classList.add(Prefix.get("stock-btn-offers")),t.innerHTML="Count Stock!<small>OSA</small>"),n&&(n.parentNode.insertBefore(t,n),t.addEventListener("click",function(){chrome.runtime.sendMessage({cmd:"run"})})),e){var o=t.cloneNode(!0);e.parentNode.insertBefore(o,e),o.addEventListener("click",function(){chrome.runtime.sendMessage({cmd:"run"})})}},t=function(e){setInterval(function(){document.querySelector(Prefix.id("stock-btn"))||e()},1e3)};return{init:function(){AMZHelpers.isProductPage()?(e(),t(e)):AMZHelpers.isOffersPage()&&e()}}})().init();
(function(){var t=[{id:"bf2023rev",rootClass:"scxt-rev",title:"<div>OS Addon: Black Friday 2023 Promo</div>",text:['<div class="scxt-rev-body">','<div class="scxt-rev-content">',"<div></div>","<h2>RevSeller</h2>","<div><strong>Incredibly Fast FBA Calculator, Variation Viewer + New Features.</strong></div>",'<div class="scxt-rev-trial">Works on US and Canada.</div>','<div class="scxt-rev-trial">30 days free trial.</div>','<a href="https://www.revseller.com/32851/304.html" class="scxt-ga-link" data-link="rev-coupon" target="_blank">Use Coupon Code DS30 for $30 off your first year.</a>',"</div>","</div>"].join("\n")},{id:"bf2022ds",rootClass:"scxt-rev",expireTS:new Date("2022-11-28T08:00:00Z").getTime(),title:"<div>OS Addon: Black Friday 2022 Promo</div>",text:['<div class="scxt-rev-body">','<div class="scxt-rev-content">',"<div></div>","<h2>DS Amazon Quick View Extended</h2>","<div><strong>Amazon tool for research and competitor analysis</strong></div>",'<div class="scxt-rev-trial">Use Coupon Code <strong>FRIDAY</strong> for 20% discount</div>','<a href="https://chrome.google.com/webstore/detail/ds-amazon-quick-view-exte/ilpimgbmpmhfhdaaeepjokoigelkfbee" class="scxt-ga-link" data-link="" target="_blank">Get from the Chrome Store</a>',"</div>","</div>"].join("\n")}],e=function(e){var s=t.map(function(t){return t.id});chrome.runtime.sendMessage({cmd:"notifications.get",data:s},function(s){if(s&&!(Date.now()-s.notificationLastTS<144e5)){var a,n;for(var o in s){var d=s[o];if((!(n=t.filter(function(t){return t.id===o})[0])||!n.testab||n.testab(e))&&!(n&&n.expireTS&&Date.now()>n.expireTS)&&(parseInt(d)?Date.now()-d>144e5&&(a=o):d||(a=o),a))break}a&&setTimeout(function(){i(n)},2e3)}})},i=function(t){if(t){var e="";e+='<div class="scxt-n-title">'+t.title+"</div>",e+='<div class="scxt-n-text">'+t.text+"</div>",e+='<div class="scxt-text-center">',e+='<span class="scxt-btn scxt-n-later" data-id="'+t.id+'">Remind me later</span>',e+='<span class="scxt-btn scxt-n-dismiss" data-id="'+t.id+'">Close</span>',e+="</div>";var i=document.createElement("div");i.id="scxt-notification",document.body.appendChild(i),t.rootClass&&i.classList.add(t.rootClass),i.innerHTML=e,i.style.right="20px",i.querySelector(".scxt-n-dismiss").addEventListener("click",function(){var t=this.dataset.id;console.log(t),document.body.removeChild(i),chrome.runtime.sendMessage({cmd:"notifications.dismiss",data:{id:t}})}),i.querySelector(".scxt-n-later").addEventListener("click",function(){var t=this.dataset.id;document.body.removeChild(i),chrome.runtime.sendMessage({cmd:"notifications.later",data:{id:t}})})}};return{init:function(){document.location.host.match(/^(www|smile)/)&&e()}}})().init();