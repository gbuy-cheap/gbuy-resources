"use strict";import{disableContentSecurityPolicy}from"./disableContentSecurityPolicy.js";import{declarativeNetRequest}from"../../constants/declarativeNetRequestConstants.js";import{ruleNameIDs}from"../../constants/ruleNameIDs.js";import{sentrySellerAmp}from"../../../content/sentrySellerAmp/sentrySellerAmp.js";const manageContentSecurityPolicy=async()=>{var e=(await chrome.storage.sync.get("options"))?.options;modifyContentSecurityPolicy(e?.isCSPDisabled)},handleStorageChange=e=>{sentrySellerAmp.wrap(function(){handleEvent(e)})},handleEvent=e=>{e=e.options?.newValue;e&&modifyContentSecurityPolicy(Boolean(e.isCSPDisabled))},modifyContentSecurityPolicy=e=>{(e?disableContentSecurityPolicy:removeCSPRule)()},removeCSPRule=()=>{var e=ruleNameIDs.changeContentSecurityPolicy;declarativeNetRequest.updateDynamicRules({removeRuleIds:[e]})};export{manageContentSecurityPolicy,handleStorageChange};