"use strict";const importedModules={},importModules=async(e,t)=>{for(const s of e){if(!chrome.runtime.id)return;var r=chrome.runtime.getURL(`js/content/${t}/${s}.js`),r=await import(r);importedModules[s]=r[s]}},parseCarousels=async(e=document)=>{if(await importModules(["parseConstants"],"constants"),await importModules(["generateElement"],"utility/parseAmz"),chrome.runtime.id){var t=importedModules["parseConstants"];const{CAROUSEL_SELECTOR:r,carouselSelectors:s}=t;e.querySelectorAll(r).forEach(e=>{new MutationObserver(async e=>{for(const t of e){if(!t.oldValue)return;for(const r of t.target.querySelectorAll(s.CARD_SELECTOR))await processCarousel(r)}}).observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-busy"]})});for(const o of e.querySelectorAll(s.CARD_SELECTOR))await processCarousel(o)}},processCarousel=async e=>{var t,{parseConstants:r,generateElement:s}=importedModules,{SAS_LAUNCH_SELECTOR:r,carouselSelectors:o}=r;e.querySelector(r)||(r=e.querySelector(o.TITLE_SELECTOR))&&(t=e.dataset.asin||JSON.parse(e.dataset.p13nAsinMetadata).asin)&&(s=await s(t,e.querySelector(o.PRICE_SELECTOR)?e.querySelector(o.PRICE_SELECTOR).textContent.trim():""),r.style="display: inline;",s)&&r.parentElement.insertBefore(s,r)};export{parseCarousels};