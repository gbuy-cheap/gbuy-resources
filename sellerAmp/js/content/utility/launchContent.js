"use strict";const importedModules={},importModules=async(e,t)=>{for(const o of e){if(!chrome.runtime.id)return;var a=chrome.runtime.getURL(`js/content/${t}/${o}.js`),a=await import(a);importedModules[o]=a[o]}},launchContent=async()=>{if(await importModules(["urlConstants","mutableData"],"constants"),await importModules(["showSasExtensionMessage","showPopup","documentReadyHandler"],"utility"),await importModules(["loadSasScript"],"utility/loadSasScript"),await importModules(["showSASPanel","toggleSASPanel"],"utility/toggleSASPanel"),await importModules(["getURLCommon","setUrl"],"utility/urlsService"),await importModules(["parseAmz"],"utility/parseAmz"),chrome.runtime.id){const{mutableData:s,showSasExtensionMessage:l,toggleSASPanel:n,showSASPanel:i,loadSasScript:e,showPopup:d,documentReadyHandler:t,setUrl:m}=importedModules;chrome.runtime.id&&(chrome.runtime.onMessage.addListener(async(t,e,a)=>{if("show_sas_ext"==t.command)a({result:!0,command_name:t.command}),await l(t);else if("dosas"==t.command){a({farewell:"goodbye"}),$("#sasFrame").removeClass("sasdklgc-display");let e=t.selectionText;var o=t.linkUrl||t.source_url;t.smartSearch&&!t.linkUrl?e=!1:(e=e&&"undefined"!=e?e:$(":focus").text())&&"undefined"!=e||(e=$(":focus").find("img").attr("alt")),await m(e,null,null,o),$("#loadingMessage").addClass("sasdklgc-display"),1==t.no_display_update?s.gDisplay&&i():await i()}else"togglesas"==t.command?(a({farewell:"goodbye"}),n()):"togglePopup"==t.command?(d("test"),a({farewell:"goodbye"})):"getHTML"==t.command?a({html:document.documentElement.outerHTML}):"showAlert"==t.command?(window.dialog.show({title:t.title,content:t.message,okText:"Close",isCancelable:!1,onOk:()=>{window.location.reload()}}),a({isSent:!0})):"checkInjection"==t.command&&a({status:"injected"})}),await e(),$(document).ready(t))}};export{launchContent};