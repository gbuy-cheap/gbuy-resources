(()=>{"use strict";var e={39109:(e,n,t)=>{t.d(n,{d:()=>o});const o={ON_LOGIN:"login",CHECK_LANGUAGE:"check-language",CHECK_SHOPIFY:"check-shopify",NEW_INCOGNITO_TAB:"new-incognito-tab",OPEN_OPTIONS:"open-options",OPEN_PAGE:"open-page",OPEN_PAGE_XRAY:"open-page-and-xray",OPEN_PAGE_WALMART_XRAY:"open-page-and-walmart-xray",RELOAD_TABS:"reload-tabs",REVIEW_REQUEST:"review-request",BACKGROUND_REQUEST:"background-request",PRODUCT_REQUEST:"product-request",DOWNLOAD:"download"}},86759:(e,n,t)=>{t.d(n,{Z:()=>o});const o=(e="*://*/*")=>new Promise((n=>chrome.permissions.contains({origins:[e]},(e=>n(e)))))},75042:(e,n,t)=>{t.d(n,{B1:()=>T.B,ID:()=>m,B$:()=>s,xl:()=>f,ye:()=>u,Gj:()=>d,ZF:()=>v,PQ:()=>l,ow:()=>g,o7:()=>a});var o=t(22478);const r=e=>chrome.storage[["cache-dynamic","cache-local","local"].includes(e)?"local":"sync"],i=(e,n)=>(o.useStorageLog&&console.log("STORE - SET",e,n),r(e).set(n)),a=!1,c=a&&!1,s=e=>(a&&console.log("STORE - CLEAR",e),r(e).clear()),l=(e,n)=>i(e,n),u=(e,n,t,o={})=>{const i=r(e),c=Array.isArray(n)?n:[n],s=L(e,c,t);return a&&console.log(`STORE - SUBSCRIBE!, ${e}, [${c.join(", ")}]`),i.onChanged.addListener(s),o.ignoreInitial||setTimeout((()=>i.get().then(h(c,t)))),()=>{a&&console.log(`STORE - UNSUBSCRIBE!, ${e}, [${c.join(", ")}]`),i.onChanged.removeListener(s)}},d=(e,n)=>new Promise((t=>{const o=Array.isArray(n)?n:[n];setTimeout((()=>{a&&console.log(`STORE - ONCE!, ${e}, [${o.join(", ")}]`),r(e).get().then(h(o,t))}))})),g=(e,n,t)=>new Promise((o=>{d(e,n).then((({[n]:r})=>{l(e,{[n]:t(r)}).then(o)}))})),h=(e,n)=>t=>{const o=e.reduce(((e,n)=>(e[n]=void 0!==t[n]?t[n]:null,e)),{});c&&console.log(`STORE - INITIAL DATA, [${e.join(", ")}]`,JSON.parse(JSON.stringify(o))),n(o)},L=(e,n,t)=>o=>{const i=Object.entries(o).filter((([e])=>n.includes(e)));c&&console.log(`STORE - LISTENER, [${n.join(", ")}]`,JSON.parse(JSON.stringify(o)),JSON.parse(JSON.stringify(i))),i.length&&r(e).get().then((e=>{const o=i.reduce(((e,[n,t])=>(e[n]=void 0!==t.newValue?t.newValue:null,e)),{});n.forEach((n=>{o[n]||(o[n]=e[n])})),a&&console.log(`STORE - LISTENER DATA, [${n.join(", ")}]`,JSON.parse(JSON.stringify(o))),t(o)}))};Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var k=(e,n,t)=>new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));const p=e=>(null==e?void 0:e.ready)&&(null==e?void 0:e.expirationTime)&&new Date(e.expirationTime)>new Date&&e.data||null,y=(e=6)=>{const n=new Date;return n.setHours(n.getHours()+e)},f=(e,n)=>d(e,n).then((e=>I(e))),v=(e,n,t,o)=>k(void 0,null,(function*(){return a&&console.log(`CACHE - SET, ${e}: "${String(n)}"`,t),i(e,{[n]:{data:t,expirationTime:y(o),ready:!!t}})})),m=(e,n)=>k(void 0,null,(function*(){const t=Array.isArray(n)?n:[n];return a&&console.log(`CACHE - CLEAR, [${t.join(", ")}]`),i(e,t.reduce(((e,n)=>(e[n]={ready:!1},e)),{}))})),I=e=>Object.entries(e).reduce(((e,[n,t])=>(a&&console.log(`CACHE - GET! "${n}"`,t),e[n]=p(t),e)),{});var T=t(20881)},20881:(e,n,t)=>{t.d(n,{B:()=>o});const o="CORE_BEARER_TOKEN"},27707:(e,n,t)=>{t.d(n,{F4:()=>u,gN:()=>l,hj:()=>c,iM:()=>d,nU:()=>s});var o,r;const i=(null==(r=((null==(o=null==chrome?void 0:chrome.runtime)?void 0:o.getManifest())||{}).content_scripts)?void 0:r.flatMap((e=>e.matches||[])).map((e=>e||"")).filter((e=>"*://*/*"!==e)).map((e=>null==e?void 0:e.replace(/\./g,"\\."))).map((e=>null==e?void 0:e.replace(/\*/g,".*"))).map((e=>RegExp(e,""))))||[],a=e=>e.id&&e.url&&i.some((n=>n.test(`${e.url}`))),c=e=>new Promise((n=>{chrome.tabs?chrome.tabs.get(e,(e=>n(e))):n(void 0)})),s=()=>new Promise((e=>{chrome.tabs?chrome.tabs.query({currentWindow:!0,active:!0},(n=>e(n[0]))):e(void 0)})),l=e=>{return n=void 0,t=null,o=function*(){const n=yield s();return chrome.tabs.create({url:e,index:((null==n?void 0:n.index)||0)+1})},new Promise(((e,r)=>{var i=e=>{try{c(o.next(e))}catch(e){r(e)}},a=e=>{try{c(o.throw(e))}catch(e){r(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(i,a);c((o=o.apply(n,t)).next())}));var n,t,o},u=()=>new Promise((e=>{chrome.tabs?chrome.tabs.query({},(n=>e(n.filter(a)||[]))):e([])})),d=(e,n)=>{chrome.tabs&&chrome.tabs.update(e,n).then()}},93005:(e,n,t)=>{},50720:(e,n,t)=>{t.d(n,{o:()=>r});var o=t(75042);const r=e=>(0,o.Gj)("sync","accountId").then((({accountId:n})=>{const t=new URL(e);return n&&-1!==n&&t.searchParams.append("accountId",`${n}`),t.toString()}))},49430:(e,n,t)=>{t.d(n,{_:()=>i});var o=t(75042),r=t(24587);const i=e=>{return n=void 0,t=null,i=function*(){try{const n=e||(yield(0,o.Gj)("sync","accountId").then((({accountId:e})=>e)));if(!n)return null;const t=yield fetch((0,r.kK)(n));if(200===t.status){const e=t.headers.get("content-type");return e&&-1!==e.indexOf("application/json")?yield t.json():null}}catch(e){console.log("%c Check new alerts error","color: #FF4081",e)}return null},new Promise(((e,o)=>{var r=e=>{try{c(i.next(e))}catch(e){o(e)}},a=e=>{try{c(i.throw(e))}catch(e){o(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(r,a);c((i=i.apply(n,t)).next())}));var n,t,i}},15262:(e,n,t)=>{t.d(n,{L:()=>o});const o=(e,...n)=>{return t=void 0,o=[e,...n],r=function*(e,n={}){return 200===e.status?yield e.json():n},new Promise(((e,n)=>{var i=e=>{try{c(r.next(e))}catch(e){n(e)}},a=e=>{try{c(r.throw(e))}catch(e){n(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(i,a);c((r=r.apply(t,o)).next())}));var t,o,r}},81804:(e,n,t)=>{t(75042)},36821:(e,n,t)=>{t.d(n,{E3:()=>i});var o=t(39109),r=(t(27707),t(10194));Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const i=e=>e.fromBackground?(0,r.b)(e):chrome.runtime.sendMessage({type:o.d.ON_LOGIN,params:e})},22478:(e,n,t)=>{t.d(n,{TOKEN_KEY:()=>i.B1,backgroundMessageTypes:()=>o.d,clearCachedData:()=>i.ID,clearStorage:()=>i.B$,createNewTab:()=>a.gN,entitlementsLink:()=>I.gy,getAllValidTabs:()=>a.F4,getCheckLoginLink:()=>I.Z0,getCurrentTab:()=>a.nU,getFullLogin:()=>T.b,getPermissions:()=>r.Z,getTabWithId:()=>a.hj,getUnreadAlerts:()=>s._,onGetCacheDataOnce:()=>i.xl,onGetStore:()=>i.ye,onGetStoreOnce:()=>i.Gj,parserConfigLink:()=>I.j1,realTokenLink:()=>I.Bh,reduceAccountInfo:()=>u.e,reduceCheckLogin:()=>h.w,sendBackgroundLogin:()=>l.E3,setStaticCachedData:()=>i.ZF,setStore:()=>i.PQ,signupLink:()=>I.j_,transformIntoCNLink:()=>I.OG,uninstallSurveyLink:()=>m.Mq,updateLinkWithAccountId:()=>c.o,updateStore:()=>i.ow,updateTab:()=>a.iM,useStorageLog:()=>i.o7,userInfoLink:()=>I.zM});var o=t(39109),r=t(86759),i=t(75042),a=t(27707),c=(t(93005),t(50720)),s=t(49430),l=(t(81804),t(36821)),u=t(77893),d=t(31260);t.o(d,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return d.entitlementsLink}}),t.o(d,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return d.getCheckLoginLink}}),t.o(d,"getFullLogin")&&t.d(n,{getFullLogin:function(){return d.getFullLogin}}),t.o(d,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return d.parserConfigLink}}),t.o(d,"realTokenLink")&&t.d(n,{realTokenLink:function(){return d.realTokenLink}}),t.o(d,"reduceCheckLogin")&&t.d(n,{reduceCheckLogin:function(){return d.reduceCheckLogin}}),t.o(d,"signupLink")&&t.d(n,{signupLink:function(){return d.signupLink}}),t.o(d,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return d.transformIntoCNLink}}),t.o(d,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return d.uninstallSurveyLink}}),t.o(d,"userInfoLink")&&t.d(n,{userInfoLink:function(){return d.userInfoLink}});var g=t(23843);t.o(g,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return g.entitlementsLink}}),t.o(g,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return g.getCheckLoginLink}}),t.o(g,"getFullLogin")&&t.d(n,{getFullLogin:function(){return g.getFullLogin}}),t.o(g,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return g.parserConfigLink}}),t.o(g,"realTokenLink")&&t.d(n,{realTokenLink:function(){return g.realTokenLink}}),t.o(g,"reduceCheckLogin")&&t.d(n,{reduceCheckLogin:function(){return g.reduceCheckLogin}}),t.o(g,"signupLink")&&t.d(n,{signupLink:function(){return g.signupLink}}),t.o(g,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return g.transformIntoCNLink}}),t.o(g,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return g.uninstallSurveyLink}}),t.o(g,"userInfoLink")&&t.d(n,{userInfoLink:function(){return g.userInfoLink}});var h=t(87436),L=t(34944);t.o(L,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return L.entitlementsLink}}),t.o(L,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return L.getCheckLoginLink}}),t.o(L,"getFullLogin")&&t.d(n,{getFullLogin:function(){return L.getFullLogin}}),t.o(L,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return L.parserConfigLink}}),t.o(L,"realTokenLink")&&t.d(n,{realTokenLink:function(){return L.realTokenLink}}),t.o(L,"signupLink")&&t.d(n,{signupLink:function(){return L.signupLink}}),t.o(L,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return L.transformIntoCNLink}}),t.o(L,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return L.uninstallSurveyLink}}),t.o(L,"userInfoLink")&&t.d(n,{userInfoLink:function(){return L.userInfoLink}});var k=t(98955);t.o(k,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return k.entitlementsLink}}),t.o(k,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return k.getCheckLoginLink}}),t.o(k,"getFullLogin")&&t.d(n,{getFullLogin:function(){return k.getFullLogin}}),t.o(k,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return k.parserConfigLink}}),t.o(k,"realTokenLink")&&t.d(n,{realTokenLink:function(){return k.realTokenLink}}),t.o(k,"signupLink")&&t.d(n,{signupLink:function(){return k.signupLink}}),t.o(k,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return k.transformIntoCNLink}}),t.o(k,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return k.uninstallSurveyLink}}),t.o(k,"userInfoLink")&&t.d(n,{userInfoLink:function(){return k.userInfoLink}});var p=t(87007);t.o(p,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return p.entitlementsLink}}),t.o(p,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return p.getCheckLoginLink}}),t.o(p,"getFullLogin")&&t.d(n,{getFullLogin:function(){return p.getFullLogin}}),t.o(p,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return p.parserConfigLink}}),t.o(p,"realTokenLink")&&t.d(n,{realTokenLink:function(){return p.realTokenLink}}),t.o(p,"signupLink")&&t.d(n,{signupLink:function(){return p.signupLink}}),t.o(p,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return p.transformIntoCNLink}}),t.o(p,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return p.uninstallSurveyLink}}),t.o(p,"userInfoLink")&&t.d(n,{userInfoLink:function(){return p.userInfoLink}});var y=t(90368);t.o(y,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return y.entitlementsLink}}),t.o(y,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return y.getCheckLoginLink}}),t.o(y,"getFullLogin")&&t.d(n,{getFullLogin:function(){return y.getFullLogin}}),t.o(y,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return y.parserConfigLink}}),t.o(y,"realTokenLink")&&t.d(n,{realTokenLink:function(){return y.realTokenLink}}),t.o(y,"signupLink")&&t.d(n,{signupLink:function(){return y.signupLink}}),t.o(y,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return y.transformIntoCNLink}}),t.o(y,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return y.uninstallSurveyLink}}),t.o(y,"userInfoLink")&&t.d(n,{userInfoLink:function(){return y.userInfoLink}});t(18721);var f=t(90086);t.o(f,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return f.entitlementsLink}}),t.o(f,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return f.getCheckLoginLink}}),t.o(f,"getFullLogin")&&t.d(n,{getFullLogin:function(){return f.getFullLogin}}),t.o(f,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return f.parserConfigLink}}),t.o(f,"realTokenLink")&&t.d(n,{realTokenLink:function(){return f.realTokenLink}}),t.o(f,"signupLink")&&t.d(n,{signupLink:function(){return f.signupLink}}),t.o(f,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return f.transformIntoCNLink}}),t.o(f,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return f.uninstallSurveyLink}}),t.o(f,"userInfoLink")&&t.d(n,{userInfoLink:function(){return f.userInfoLink}});var v=t(37941);t.o(v,"entitlementsLink")&&t.d(n,{entitlementsLink:function(){return v.entitlementsLink}}),t.o(v,"getCheckLoginLink")&&t.d(n,{getCheckLoginLink:function(){return v.getCheckLoginLink}}),t.o(v,"getFullLogin")&&t.d(n,{getFullLogin:function(){return v.getFullLogin}}),t.o(v,"parserConfigLink")&&t.d(n,{parserConfigLink:function(){return v.parserConfigLink}}),t.o(v,"realTokenLink")&&t.d(n,{realTokenLink:function(){return v.realTokenLink}}),t.o(v,"signupLink")&&t.d(n,{signupLink:function(){return v.signupLink}}),t.o(v,"transformIntoCNLink")&&t.d(n,{transformIntoCNLink:function(){return v.transformIntoCNLink}}),t.o(v,"uninstallSurveyLink")&&t.d(n,{uninstallSurveyLink:function(){return v.uninstallSurveyLink}}),t.o(v,"userInfoLink")&&t.d(n,{userInfoLink:function(){return v.userInfoLink}});var m=t(54358),I=t(24587),T=t(10194)},77893:(e,n,t)=>{t.d(n,{e:()=>o});const o=e=>({id:e.results.id,accountId:e.results.accountId,userId:e.results.userId,hasMerchantIds:e.results.merchant_ids.length>0})},31260:()=>{},23843:()=>{},87436:(e,n,t)=>{t.d(n,{w:()=>o});const o=e=>({accountId:e.accountId,logged:e.logged,upsellInfo:e.upsellInfo,onboardingStatus:e.onboardingStatus,activeExperiments:e.activeExperiments})},34944:()=>{},98955:()=>{},87007:()=>{},90368:()=>{},18721:(e,n,t)=>{},90086:()=>{},37941:()=>{},54358:(e,n,t)=>{t.d(n,{Mq:()=>o});const o="https://survey.survicate.com/3ac7225d2fd0a9c0/?p=anonymous"},24587:(e,n,t)=>{t.d(n,{Bh:()=>l,OG:()=>r,Z0:()=>a,gy:()=>u,j1:()=>d,j_:()=>i,kK:()=>g,zM:()=>s});Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const o="https://members.helium10.com",r=e=>e.replace(o,"https://members.h10.com.cn"),i=`${o}/user/signup?type=chrome-extension`,a=()=>{var e;const n=new URL(`${o}/extension/check-login`);return(null==(e=null==chrome?void 0:chrome.runtime)?void 0:e.id)&&n.searchParams.append("appId",chrome.runtime.id),n.toString()},c=`${o}/api/v1`,s=`${c}/customers/me`,l=e=>{const n=new URL(`${c}/site/token`);return n.searchParams.append("accountId",e),n.toString()},u=`${c}/customers/me/chrome-extension`,d=`${c}/site/get-parser-config`,g=e=>{const n=new URL(`${c}/notification/check-unread`);return n.searchParams.append("source","Alerts"),e&&n.searchParams.append("accountId",`${e}`),n.toString()}},10194:(e,n,t)=>{t.d(n,{b:()=>$});var o=t(22478),r=t(15262);const i=()=>{return e=void 0,n=null,t=function*(){const e=yield(0,o.updateLinkWithAccountId)(o.userInfoLink);return fetch(e,{}).then((e=>(0,r.L)(e)))},new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));var e,n,t};var a=t(75732);const c=e=>{return n=void 0,t=null,r=function*(){try{const n=yield s(e),t=n||(yield l(e));if(t)return a.d&&console.log("INFO - SET DATA",t),n||(yield(0,o.setStaticCachedData)("cache-sync","token",t)),t;a.d&&console.log("INFO - ERROR DATA: INVALID DATA")}catch(e){a.d&&console.log("INFO - ERROR DATA",e)}return null},new Promise(((e,o)=>{var i=e=>{try{c(r.next(e))}catch(e){o(e)}},a=e=>{try{c(r.throw(e))}catch(e){o(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(i,a);c((r=r.apply(n,t)).next())}));var n,t,r},s=e=>(0,o.onGetCacheDataOnce)("cache-sync","token").then((({token:n})=>(a.d&&console.log("INFO - CACHE DATA",n),(null==n?void 0:n.accountId)===e?n:null))),l=e=>i().then((n=>(a.d&&console.log("INFO - FETCH DATA",n),(null==n?void 0:n.results.accountId)===e?(0,o.reduceAccountInfo)(n):null)));var u=(e,n,t)=>new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));const d=(e,n)=>u(void 0,null,(function*(){const t=n?(0,o.transformIntoCNLink)(e):e;return fetch(t,{}).then((e=>(0,r.L)(e,{accountId:-1,logged:!1})))}));var g=Object.defineProperty,h=Object.defineProperties,L=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(e,n,t)=>n in e?g(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,v=(e,n)=>{for(var t in n||(n={}))p.call(n,t)&&f(e,t,n[t]);if(k)for(var t of k(n))y.call(n,t)&&f(e,t,n[t]);return e};const m=(e,n)=>{return t=void 0,r=null,i=function*(){try{const t=n?null:yield I(e),r=t||(yield T(e));if(null==r?void 0:r.logged){const n=yield(0,o.onGetStoreOnce)("sync",["onboardingFinished"]).then((({onboardingFinished:e})=>e||{})),i=!(null==n?void 0:n[r.accountId])&&r.onboardingStatus;yield(0,o.onGetStoreOnce)("local",["accountId","CURRENT_ACCOUNT_ID","canApplyCoupon"]).then((({accountId:e,CURRENT_ACCOUNT_ID:n,canApplyCoupon:t})=>{var i,a;const c=!(r.accountId===e&&r.accountId===n),s=((null==(i=r.upsellInfo)?void 0:i.canApplyCoupon)||!1)!==t;if(c||s)return(0,o.setStore)("local",{accountId:r.accountId,CURRENT_ACCOUNT_ID:r.accountId,canApplyCoupon:(null==(a=r.upsellInfo)?void 0:a.canApplyCoupon)||!1})})),yield(0,o.onGetStoreOnce)("sync",["accountId","activeExperiments"]).then((({accountId:e,activeExperiments:t})=>{const a=r.accountId!==e,c=JSON.stringify(r.activeExperiments)!==JSON.stringify(t);if(a||c||i)return(0,o.setStore)("sync",{accountId:r.accountId,activeExperiments:r.activeExperiments||[],onboardingFinished:i?(s=v({},n),l={[r.accountId]:!0},h(s,L(l))):n});var s,l}));const c=yield(0,o.onGetCacheDataOnce)("cache-sync","login").then((({login:n})=>!!e&&(null==n?void 0:n.accountId)!==e));return a.d&&console.log("LOGIN - SET DATA",r,c?"CHANGED ACCOUNT!":""),c&&(yield(0,o.clearCachedData)("cache-sync",["login","token","entitlements","parser"])),!c&&t||(yield(0,o.setStaticCachedData)("cache-sync","login",r)),r}a.d&&console.log("LOGIN - ERROR DATA: NOT LOGGED IN!")}catch(e){a.d&&console.log("LOGIN - ERROR DATA",e)}return yield(0,o.setStore)("local",{accountId:-1,CURRENT_ACCOUNT_ID:0,canApplyCoupon:!1}),yield(0,o.setStore)("sync",{accountId:-1,isUserLogged:!1,activeExperiments:[]}),(0,o.clearCachedData)("cache-sync",["login","token","entitlements","parser"]).then(),(0,o.setStore)("local",{[o.TOKEN_KEY]:"{}"}).then(),null},new Promise(((e,n)=>{var o=e=>{try{c(i.next(e))}catch(e){n(e)}},a=e=>{try{c(i.throw(e))}catch(e){n(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(o,a);c((i=i.apply(t,r)).next())}));var t,r,i},I=e=>(0,o.onGetCacheDataOnce)("cache-sync","login").then((({login:n})=>(a.d&&console.log("LOGIN - CACHE DATA",n),e&&(null==n?void 0:n.accountId)!==e?null:(null==n?void 0:n.logged)?n:null))),T=e=>u(void 0,null,(function*(){const e=yield(0,o.updateLinkWithAccountId)((0,o.getCheckLoginLink)());yield(0,o.setStore)("sync",{isChinese:!1});const n=yield d(e,!1);if(!n.logged){const n=yield d(e,!0);if(!n.logged)throw new Error("No account found");return yield(0,o.setStore)("sync",{isChinese:!0}),n.amazonTokens=[],n}return n.amazonTokens=[],n})).then((n=>(a.d&&console.log("LOGIN - FETCH DATA",n),e&&(null==n?void 0:n.accountId)!==e?null:n?(0,o.reduceCheckLogin)(n):null)));const C=()=>{return e=void 0,n=null,t=function*(){const e=yield(0,o.updateLinkWithAccountId)(o.parserConfigLink);return fetch(e,{}).then((e=>(0,r.L)(e))).then((e=>{var n;return(null==(n=null==e?void 0:e.results)?void 0:n.config)||{}}))},new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));var e,n,t};const E=()=>{return e=void 0,n=null,t=function*(){try{const e=yield O(),n=e||(yield S());if(n)return a.d&&console.log("PARSER - SET DATA",n),e||(yield(0,o.setStaticCachedData)("cache-sync","parser",n)),n;a.d&&console.log("PARSER - ERROR DATA: INVALID DATA")}catch(e){a.d&&console.log("PARSER - ERROR DATA",e)}return null},new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));var e,n,t},O=()=>(0,o.onGetCacheDataOnce)("cache-sync","parser").then((({parser:e})=>(a.d&&console.log("PARSER - CACHE DATA",e),e||null))),S=()=>C().then((e=>(a.d&&console.log("PARSER - FETCH DATA",e),e)));const A=()=>{return e=void 0,n=null,t=function*(){const e=yield(0,o.updateLinkWithAccountId)(o.entitlementsLink);return fetch(e,{}).then((e=>(0,r.L)(e)))},new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));var e,n,t};const b=()=>{return e=void 0,n=null,t=function*(){try{const e=yield N(),n=e||(yield P()),t=!!n;if(yield(0,o.onGetStoreOnce)("sync",["isUserLogged"]).then((({isUserLogged:e})=>{if(e!==t)return(0,o.setStore)("sync",{isUserLogged:t})})),n)return a.d&&console.log("ENTITLEMENTS - SET DATA",n),e||(yield(0,o.setStaticCachedData)("cache-sync","entitlements",n)),n;a.d&&console.log("ENTITLEMENTS - ERROR DATA: INVALID DATA")}catch(e){a.d&&console.log("ENTITLEMENTS - ERROR DATA",e)}return null},new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));var e,n,t},N=()=>(0,o.onGetCacheDataOnce)("cache-sync","entitlements").then((({entitlements:e})=>(a.d&&console.log("ENTITLEMENTS - CACHE DATA",e),e||null))),P=()=>A().then((e=>(a.d&&console.log("ENTITLEMENTS - FETCH DATA",e),e||null)));const w=e=>{return n=void 0,t=null,i=function*(){const n=(0,o.realTokenLink)(e);return fetch(n,{}).then((e=>(0,r.L)(e)))},new Promise(((e,o)=>{var r=e=>{try{c(i.next(e))}catch(e){o(e)}},a=e=>{try{c(i.throw(e))}catch(e){o(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(r,a);c((i=i.apply(n,t)).next())}));var n,t,i};var R=Object.defineProperty,x=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,_=(e,n,t)=>n in e?R(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,j=(e,n)=>{for(var t in n||(n={}))D.call(n,t)&&_(e,t,n[t]);if(x)for(var t of x(n))G.call(n,t)&&_(e,t,n[t]);return e};const F=e=>{return n=void 0,t=null,r=function*(){const n=`${e}`,t=yield U(n),r=t||(yield M(n));return r&&!t&&(yield(0,o.updateStore)("local",o.TOKEN_KEY,(e=>JSON.stringify(j(j({},B(e)),n?{[n]:r}:{}))))),{data:a.d?yield(0,o.onGetStoreOnce)("local",o.TOKEN_KEY).then((({[o.TOKEN_KEY]:e})=>e)):"--DISABLED LOG--",token:r,accountId:n}},new Promise(((e,o)=>{var i=e=>{try{c(r.next(e))}catch(e){o(e)}},a=e=>{try{c(r.throw(e))}catch(e){o(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(i,a);c((r=r.apply(n,t)).next())}));var n,t,r},U=e=>(0,o.onGetStoreOnce)("local",o.TOKEN_KEY).then((({[o.TOKEN_KEY]:n})=>{const t=B(n),r=(null==t?void 0:t[e])||null;return a.d&&console.log("TOKEN - CACHE DATA",t,e,r),r})),M=e=>w(e).then((e=>(a.d&&console.log("TOKEN - FETCH DATA",e),(null==e?void 0:e.data.token)||null))),B=e=>{try{return JSON.parse(e||"{}")||{}}catch(e){return{}}};const H={value:!1},$=e=>{return n=void 0,t=null,o=function*(){if(a.d&&console.log("GETTING FULL LOGIN",H,e),H.value&&!e.forced)return yield new Promise((e=>setTimeout(e,1e3))),[];let n=!1;for(;H.value;)a.d&&console.log("SLEEPING DUPLICATE LOGIN PROCESS!"),n=!0,yield new Promise((e=>setTimeout(e,1e3)));return H.value=!0,m(e.targetId,!n&&(null==e?void 0:e.ignoreCache)).then((e=>e&&e.accountId?Promise.all([F(e.accountId),c(e.accountId),b(),E()]).then((n=>(H.value=!1,[e,...n]))):(H.value=!1,[null,null,null,null,null]))).then((n=>{var t,o,r;return a.d&&console.log(`LOGIN RESULT - ${null==(t=e.log)?void 0:t.toUpperCase()}`,null==(o=null==n?void 0:n[0])?void 0:o.accountId,null==(r=null==n?void 0:n[3])?void 0:r.data.plan.key,{params:e,results:n}),n})).catch((()=>H.value=!1))},new Promise(((e,r)=>{var i=e=>{try{c(o.next(e))}catch(e){r(e)}},a=e=>{try{c(o.throw(e))}catch(e){r(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(i,a);c((o=o.apply(n,t)).next())}));var n,t,o}},75732:(e,n,t)=>{t.d(n,{d:()=>o});const o=!1}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e=t(22478);const n={extendedInformation:!0,listingHealthScore:!0,bsrGraph:!0,pageWidget:!0,searchExpander:!0,searchPageToolbar:!0,factor:"two",score:{revenue:5e3,reviews:75},language:"en"};var o=(e,n,t)=>new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));const r=!1;let i;const a=3e5,c=()=>(0,e.getAllValidTabs)().then((e=>Promise.all(e.map((e=>chrome.tabs.reload(e.id||0).then()))))),s=n=>{(0,e.onGetStoreOnce)("sync","extensionEnabled").then((t=>o(void 0,[t],(function*({extensionEnabled:t}){if(!n.id||!n.url)return;const o=t&&(yield(0,e.getPermissions)(n.url));chrome.action.setIcon({tabId:n.id,path:o?"icon/16.png":"icon/16-off.png"}).then(),chrome.action.setTitle({tabId:n.id,title:o?"Helium 10":"Helium 10 disabled"}).then()}))))},l=(e,n)=>void 0===e?n:e,u=()=>o(void 0,null,(function*(){const{token:n}=yield(0,e.onGetCacheDataOnce)("cache-sync","token"),{accountId:t}=yield(0,e.onGetStoreOnce)("sync","accountId");if(!(null==n?void 0:n.hasMerchantIds)||!t)return;const o=yield(0,e.getUnreadAlerts)(t);yield(0,e.setStore)("sync",{unreadAlerts:(null==o?void 0:o.unreadCount)||0})})),d=n=>(0,e.getTabWithId)(n.tabId).then((e=>{e&&!chrome.runtime.lastError&&s(e)}));const g=()=>{return n=void 0,t=null,o=function*(){if(yield(0,e.getPermissions)()){const n=yield(0,e.getCurrentTab)();n&&(0,e.updateTab)(n.id||0,{url:n.url})}},new Promise(((e,r)=>{var i=e=>{try{c(o.next(e))}catch(e){r(e)}},a=e=>{try{c(o.throw(e))}catch(e){r(e)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(i,a);c((o=o.apply(n,t)).next())}));var n,t,o};var h=(e,n,t)=>new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));const L=t=>h(void 0,null,(function*(){switch(yield(0,e.clearStorage)("local"),t.reason){case chrome.runtime.OnInstalledReason.INSTALL:r,yield(0,e.setStore)("sync",{extensionEnabled:!0,isUserLogged:!1,settings:n}),yield(0,e.createNewTab)(e.signupLink),(0,e.sendBackgroundLogin)({log:"INSTALL",ignoreCache:!0,fromBackground:!0}).then((()=>u().then())),yield c();break;case chrome.runtime.OnInstalledReason.UPDATE:r,(0,e.sendBackgroundLogin)({log:"UPDATE",ignoreCache:!0,fromBackground:!0}).then((()=>u().then())),(0,e.onGetStoreOnce)("sync",["extensionEnabled","options"]).then((t=>h(void 0,[t],(function*({extensionEnabled:t,options:o}){t&&(yield(0,e.updateStore)("sync","settings",(e=>e||(e=>{var t,o,r;return e?{extendedInformation:l(e.showExtInfo,!0),listingHealthScore:l(e.showListingHealth,!0),bsrGraph:l(e.showBsrGraph,!0),pageWidget:l(e.showXrayWidget,!0),searchExpander:l(e.searchExpander,!0),searchPageToolbar:l(e.searchPageToolbar,!0),factor:(null==(t=e.successScore)?void 0:t.multiFactor)?"multi":"two",language:"en",score:{revenue:l(null==(o=e.successScore)?void 0:o.revenue,n.score.revenue),reviews:l(null==(r=e.successScore)?void 0:r.reviews,n.score.reviews)}}:n})(o))),yield c())}))));case chrome.runtime.OnInstalledReason.CHROME_UPDATE:case chrome.runtime.OnInstalledReason.SHARED_MODULE_UPDATE:}}));var k=Object.defineProperty,p=Object.defineProperties,y=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,I=(e,n,t)=>n in e?k(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,T=(e,n,t)=>new Promise(((o,r)=>{var i=e=>{try{c(t.next(e))}catch(e){r(e)}},a=e=>{try{c(t.throw(e))}catch(e){r(e)}},c=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,a);c((t=t.apply(e,n)).next())}));const C=(n,t,o)=>{var r,i,a;if(!n.type)return!0;switch(n.type){case e.backgroundMessageTypes.ON_LOGIN:(0,e.getFullLogin)(n.params).then((e=>o(e)));break;case e.backgroundMessageTypes.CHECK_LANGUAGE:fetch(n.url,n.params).then((e=>T(void 0,null,(function*(){return o(200===e.status?yield e.json():null)}))));break;case e.backgroundMessageTypes.CHECK_SHOPIFY:fetch(n.url,n.params).then((e=>T(void 0,null,(function*(){if(200===e.status){const n=yield e.json();o(n.hasOwnProperty("currency")&&n.hasOwnProperty("token"))}else o(!1)})))).catch((e=>{console.log("Shopify check error",e),o(!1)}));break;case e.backgroundMessageTypes.NEW_INCOGNITO_TAB:chrome.windows.create((a=((e,n)=>{for(var t in n||(n={}))v.call(n,t)&&I(e,t,n[t]);if(f)for(var t of f(n))m.call(n,t)&&I(e,t,n[t]);return e})({},n.details),p(a,y({incognito:!0}))),o);break;case e.backgroundMessageTypes.OPEN_OPTIONS:null==(i=(r=chrome.runtime).openOptionsPage)||i.call(r);break;case e.backgroundMessageTypes.OPEN_PAGE:(0,e.createNewTab)(n.params.url).then();break;case e.backgroundMessageTypes.OPEN_PAGE_XRAY:(0,e.createNewTab)(n.params.url).then((e=>setTimeout((()=>chrome.tabs.sendMessage((null==e?void 0:e.id)||0,{type:"open-black-box",params:{}})),3e3)));break;case e.backgroundMessageTypes.OPEN_PAGE_WALMART_XRAY:(0,e.createNewTab)(n.params.url).then((e=>setTimeout((()=>chrome.tabs.sendMessage((null==e?void 0:e.id)||0,{type:"open-xray-walmart"})),3e3)));break;case e.backgroundMessageTypes.RELOAD_TABS:c().then();break;case e.backgroundMessageTypes.BACKGROUND_REQUEST:(0,e.onGetStoreOnce)("sync","isChinese").then((({isChinese:t})=>{fetch(t?(0,e.transformIntoCNLink)(n.url):n.url,n.params).then((e=>T(void 0,null,(function*(){var n;const t=yield e[(null==(n=e.headers.get("Content-Type"))?void 0:n.includes("application/json"))?"json":"text"]();o({data:t,ok:e.ok,status:e.status,statusText:e.statusText})})))).catch((e=>{o({data:null,ok:!1,status:(null==e?void 0:e.status)||500,error:e})}))}));break;case e.backgroundMessageTypes.REVIEW_REQUEST:fetch(n.url,{method:"POST",headers:{accept:"text/html,*/*","Content-Type":"application/x-www-form-urlencoded;",downlink:"3.95",ect:"4g",rtt:"150","sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-requested-with":"XMLHttpRequest"},body:n.params}).then((e=>T(void 0,null,(function*(){o({data:yield e.text()})})))).catch((e=>{o({data:"",error:e})}));break;case e.backgroundMessageTypes.DOWNLOAD:{const e=new URL(n.url),t=new URLSearchParams(e.search);n.isProductPage&&t.append("psc","1"),e.search=t.toString(),fetch(e.toString(),{method:"GET",credentials:"same-origin"}).then((e=>{if(200===e.status)return e.text();throw e})).then((e=>{"function"==typeof o&&o({err:!1,data:e})})).catch((e=>{console.log("%cDownload Error","color: #FF4081",e),"function"==typeof o&&o({err:!0})}));break}}return!0},E=(e,n,t)=>{s(t)};var O,S;console.log("Start Extension Background!"),chrome.runtime.lastError?console.log("Runtime Error!",chrome.runtime.lastError.message):(null==(S=(O=chrome.runtime).setUninstallURL)||S.call(O,e.uninstallSurveyLink),chrome.runtime.onMessage.addListener(C),chrome.runtime.onMessageExternal.addListener(C),chrome.tabs.onUpdated.addListener(E),chrome.tabs.onActivated.addListener(d),chrome.permissions.onAdded.addListener(g),chrome.runtime.onInstalled.addListener(L),(0,e.onGetStore)("sync",["isUserLogged","unreadAlerts"],(e=>o(void 0,[e],(function*({isUserLogged:e,unreadAlerts:n}){e&&n?(yield chrome.action.setBadgeBackgroundColor({color:"#f64f45"}),yield chrome.action.setBadgeText({text:n>999?"999+":`${n}`}),clearInterval(i),i=setInterval((()=>{u().then()}),a)):yield chrome.action.setBadgeText({text:""})})))))})()})();